{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table-filter",
  "type": "registry:block",
  "title": "Data table filter",
  "author": "Kian Bazarjani <kian@bazza.dev>",
  "description": "A powerful data table filter component inspired by Linear.",
  "dependencies": [
    "@bazza-ui/filters",
    "date-fns"
  ],
  "registryDependencies": [
    "action-menu",
    "button",
    "calendar",
    "checkbox",
    "command",
    "dropdown-menu",
    "input",
    "label",
    "popover",
    "separator",
    "slider",
    "table",
    "tabs",
    "use-mobile"
  ],
  "files": [
    {
      "path": "registry/data-table-filter/index.tsx",
      "content": "// Main compound component export\nexport { Filter } from './components/data-table-filter/compound'\n// Compound component primitives for custom compositions\nexport {\n  FilterBlock,\n  FilterList,\n  FilterListMobileContainer,\n} from './components/filter-list'\nexport type {\n  DataTableFilterContextValue,\n  DataTableFilterProviderProps,\n} from './context'\n// Context exports for advanced usage\nexport {\n  DataTableFilterProvider,\n  useFilterActions,\n  useFilterColumn,\n  useFilterContext,\n  useFilterEntityName,\n  useFilterLocale,\n  useFilterStrategy,\n} from './context'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/index.tsx"
    },
    {
      "path": "registry/data-table-filter/components/data-table-filter/compound.tsx",
      "content": "'use client'\n\nimport type { ActionMenuRootProps } from '@bazza-ui/action-menu'\nimport type {\n  Column,\n  DataTableFilterActions,\n  FilterStrategy,\n  FiltersState,\n  Locale,\n} from '@bazza-ui/filters'\nimport type { ComponentPropsWithoutRef } from 'react'\nimport type { Button } from '@/components/ui/button'\nimport { useIsMobile } from '@/hooks/use-mobile'\nimport { cn } from '@/lib/utils'\nimport {\n  type DataTableFilterContextValue,\n  DataTableFilterProvider,\n} from '../../context'\nimport { FilterActionsWithContext } from '../filter-actions/filter-actions-context'\nimport {\n  FilterBlock,\n  FilterList,\n  FilterListMobileContainer,\n} from '../filter-list'\nimport { FilterMenu } from '../filter-menu'\nimport { FilterMenuWithContext } from '../filter-menu/filter-menu-context'\n\n// Provider component\nexport interface ProviderProps<TData = unknown> {\n  value: DataTableFilterContextValue<TData>\n  children: React.ReactNode\n}\n\nfunction Provider<TData>({ value, children }: ProviderProps<TData>) {\n  return (\n    <DataTableFilterProvider value={value}>{children}</DataTableFilterProvider>\n  )\n}\n\nexport namespace Provider {\n  export type Props<TData = unknown> = ProviderProps<TData>\n}\n\n// Menu component (uses context)\ninterface MenuProps {\n  children?: React.ReactNode\n  actionMenuProps?: Partial<Omit<ActionMenuRootProps, 'menu' | 'children'>>\n}\n\nfunction Menu({ children, actionMenuProps }: MenuProps = {}) {\n  return (\n    <FilterMenuWithContext actionMenuProps={actionMenuProps}>\n      {children}\n    </FilterMenuWithContext>\n  )\n}\n\nexport namespace Menu {\n  export type Props = MenuProps\n}\n\n// List component (uses context)\ninterface ListProps extends Omit<ComponentPropsWithoutRef<'div'>, 'children'> {}\n\nfunction List(props: ListProps = {}) {\n  return <FilterList {...props} />\n}\n\n// Actions component (uses context)\ninterface ActionsProps\n  extends Omit<\n    ComponentPropsWithoutRef<typeof Button>,\n    'onClick' | 'children'\n  > {\n  variant?: ComponentPropsWithoutRef<typeof Button>['variant']\n}\n\nfunction Actions(props: ActionsProps = {}) {\n  return <FilterActionsWithContext {...props} />\n}\n\n// Main compound component for composition\nexport interface FilterRootProps extends ComponentPropsWithoutRef<'div'> {\n  children: React.ReactNode\n}\n\nfunction Root({ children, className, ...props }: FilterRootProps) {\n  const isMobile = useIsMobile()\n\n  return (\n    <div\n      data-slot=\"filter-root\"\n      data-mobile={isMobile}\n      className={cn('flex w-full items-start justify-between gap-2', className)}\n      {...props}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport namespace Root {\n  export type Props = FilterRootProps\n}\n\n// Convenience component that provides default composition\nexport interface FilterProps<TData> {\n  columns: Column<TData>[]\n  filters: FiltersState\n  actions: DataTableFilterActions\n  strategy: FilterStrategy\n  locale?: Locale\n  entityName?: string\n}\n\nexport function Filter<TData>({\n  columns,\n  filters,\n  actions,\n  strategy,\n  locale = 'en',\n  entityName,\n}: FilterProps<TData>) {\n  const isMobile = useIsMobile()\n\n  const contextValue: DataTableFilterContextValue<TData> = {\n    columns,\n    filters,\n    actions,\n    strategy,\n    locale,\n    entityName,\n  }\n\n  if (isMobile) {\n    return (\n      <Provider value={contextValue}>\n        <div className=\"flex w-full items-start justify-between gap-2\">\n          <div className=\"flex gap-1\">\n            <Menu />\n            <Actions />\n          </div>\n          <FilterListMobileContainer>\n            <List />\n          </FilterListMobileContainer>\n        </div>\n      </Provider>\n    )\n  }\n\n  return (\n    <Provider value={contextValue}>\n      <div className=\"flex w-full items-start justify-between gap-2\">\n        <div className=\"flex md:flex-wrap gap-2 w-full flex-1\">\n          <Menu />\n          <List />\n        </div>\n        <Actions />\n      </div>\n    </Provider>\n  )\n}\n\nexport namespace Filter {\n  export type Props<TData> = FilterProps<TData>\n}\n\n// Attach compound components\nFilter.Provider = Provider\nFilter.Menu = Object.assign(Menu, {\n  Trigger: FilterMenu.Trigger,\n})\nFilter.List = List\nFilter.Actions = Actions\nFilter.Root = Root\nFilter.Block = FilterBlock\nFilter.Subject = FilterBlock.Subject\nFilter.Operator = FilterBlock.Operator\nFilter.Value = FilterBlock.Value\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/data-table-filter/compound.tsx"
    },
    {
      "path": "registry/data-table-filter/components/data-table-filter/index.ts",
      "content": "export { Filter } from './compound'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/data-table-filter/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-actions.tsx",
      "content": "import { type DataTableFilterActions, type Locale, t } from '@bazza-ui/filters'\nimport { FilterXIcon } from 'lucide-react'\nimport { type ComponentPropsWithoutRef, memo } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\nimport { useFilterVariant, type FilterVariant } from '../context'\n\ninterface FilterActionsProps\n  extends Omit<ComponentPropsWithoutRef<typeof Button>, 'onClick' | 'variant'> {\n  hasFilters: boolean\n  actions?: DataTableFilterActions\n  locale?: Locale\n  variant?: ComponentPropsWithoutRef<typeof Button>['variant']\n  filterVariant?: FilterVariant\n}\n\nexport const FilterActions = memo(__FilterActions)\nfunction __FilterActions({\n  hasFilters,\n  actions,\n  locale = 'en',\n  className,\n  variant = 'destructive',\n  filterVariant: filterVariantProp,\n  ...props\n}: FilterActionsProps) {\n  const contextVariant = useFilterVariant()\n  const filterVariant = filterVariantProp ?? contextVariant\n\n  return (\n    <Button\n      data-slot=\"filter-actions\"\n      data-state={hasFilters ? 'visible' : 'hidden'}\n      className={cn('h-7 !px-2', !hasFilters && 'hidden', className)}\n      variant={variant}\n      onClick={actions?.removeAllFilters}\n      {...props}\n    >\n      <FilterXIcon />\n      <span className=\"hidden md:block\">{t('clear', locale)}</span>\n    </Button>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-actions.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-actions/filter-actions-context.tsx",
      "content": "'use client'\n\nimport type { ComponentPropsWithoutRef } from 'react'\nimport {\n  useFilterActions,\n  useFilterContext,\n  useFilterLocale,\n} from '../../context'\nimport { FilterActions } from '../filter-actions'\n\ninterface FilterActionsWithContextProps\n  extends Omit<\n    ComponentPropsWithoutRef<typeof FilterActions>,\n    'hasFilters' | 'actions' | 'locale'\n  > {}\n\nexport function FilterActionsWithContext(\n  props: FilterActionsWithContextProps = {},\n) {\n  const { filters } = useFilterContext()\n  const actions = useFilterActions()\n  const locale = useFilterLocale()\n\n  return (\n    <FilterActions\n      hasFilters={filters.length > 0}\n      actions={actions}\n      locale={locale}\n      {...props}\n    />\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-actions/filter-actions-context.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-list/filter-list.tsx",
      "content": "'use client'\n\nimport { getColumn } from '@bazza-ui/filters'\nimport {\n  type ComponentPropsWithoutRef,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport { Separator } from '@/components/ui/separator'\nimport { cn } from '@/lib/utils'\nimport { useFilterContext } from '../../context'\nimport { FilterBlock } from './filter-block'\n\ninterface FilterListProps\n  extends Omit<ComponentPropsWithoutRef<'div'>, 'children'> {}\n\nexport function FilterList({ className, ...props }: FilterListProps = {}) {\n  const { filters, columns } = useFilterContext()\n\n  return (\n    <div\n      data-slot=\"filter-list\"\n      className={cn('contents', className)}\n      {...props}\n    >\n      {filters.map((filter) => {\n        const id = filter.columnId\n        const column = getColumn(columns, id)\n\n        // Skip if no filter value\n        if (!filter.values) return null\n\n        return (\n          <FilterBlock\n            key={`filter-block-${filter.columnId}`}\n            filter={filter}\n            column={column}\n          >\n            <FilterBlock.Subject />\n            <Separator orientation=\"vertical\" />\n            <FilterBlock.Operator />\n            <Separator orientation=\"vertical\" />\n            <FilterBlock.Value />\n            <Separator orientation=\"vertical\" />\n            <FilterBlock.Remove />\n          </FilterBlock>\n        )\n      })}\n    </div>\n  )\n}\n\ninterface FilterListMobileContainerProps\n  extends ComponentPropsWithoutRef<'div'> {\n  children: React.ReactNode\n}\n\nexport function FilterListMobileContainer({\n  children,\n  className,\n  ...props\n}: FilterListMobileContainerProps) {\n  const scrollContainerRef = useRef<HTMLDivElement>(null)\n  const [showLeftBlur, setShowLeftBlur] = useState(false)\n  const [showRightBlur, setShowRightBlur] = useState(true)\n\n  // Check if there's content to scroll and update blur states\n  const checkScroll = () => {\n    if (scrollContainerRef.current) {\n      const { scrollLeft, scrollWidth, clientWidth } =\n        scrollContainerRef.current\n\n      // Show left blur if scrolled to the right\n      setShowLeftBlur(scrollLeft > 0)\n\n      // Show right blur if there's more content to scroll to the right\n      // Add a small buffer (1px) to account for rounding errors\n      setShowRightBlur(scrollLeft + clientWidth < scrollWidth - 1)\n    }\n  }\n\n  // Set up ResizeObserver to monitor container size\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  useEffect(() => {\n    if (scrollContainerRef.current) {\n      const resizeObserver = new ResizeObserver(() => {\n        checkScroll()\n      })\n      resizeObserver.observe(scrollContainerRef.current)\n      return () => {\n        resizeObserver.disconnect()\n      }\n    }\n  }, [])\n\n  // Update blur states when children change\n  // biome-ignore lint/correctness/useExhaustiveDependencies: <explanation>\n  useEffect(() => {\n    checkScroll()\n  }, [children])\n\n  return (\n    <div\n      data-slot=\"filter-list-mobile-container\"\n      className={cn('relative w-full overflow-x-hidden', className)}\n      {...props}\n    >\n      {/* Left blur effect */}\n      {showLeftBlur && (\n        <div className=\"absolute left-0 top-0 bottom-0 w-16 z-10 pointer-events-none bg-gradient-to-r from-background to-transparent animate-in fade-in-0\" />\n      )}\n\n      {/* Scrollable container */}\n      <div\n        ref={scrollContainerRef}\n        className=\"flex gap-2 overflow-x-scroll no-scrollbar\"\n        onScroll={checkScroll}\n      >\n        {children}\n      </div>\n\n      {/* Right blur effect */}\n      {showRightBlur && (\n        <div className=\"absolute right-0 top-0 bottom-0 w-16 z-10 pointer-events-none bg-gradient-to-l from-background to-transparent animate-in fade-in-0 \" />\n      )}\n    </div>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-list/filter-list.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-list/filter-block.tsx",
      "content": "'use client'\n\nimport type { Column, ColumnDataType, FilterModel } from '@bazza-ui/filters'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { X } from 'lucide-react'\nimport { type ComponentPropsWithoutRef, createContext, useContext } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Separator } from '@/components/ui/separator'\nimport { cn } from '@/lib/utils'\nimport {\n  useFilterActions,\n  useFilterContext,\n  useFilterEntityName,\n  useFilterLocale,\n  useFilterStrategy,\n  useFilterVariant,\n} from '../../context'\nimport { FilterOperator } from '../filter-operator'\nimport { FilterSubject } from '../filter-subject'\nimport { FilterValue } from '../filter-value'\n\nconst filterBlockVariants = cva('flex items-center text-xs', {\n  variants: {\n    variant: {\n      default: 'h-7 rounded-2xl border border-border bg-background shadow-xs',\n      clean: 'h-7.5 rounded-md bg-accent border-none shadow-none gap-x-1',\n    },\n  },\n  defaultVariants: {\n    variant: 'default',\n  },\n})\n\nconst filterBlockRemoveVariants = cva(\n  'text-xs w-7 h-full text-muted-foreground hover:text-primary',\n  {\n    variants: {\n      variant: {\n        default: 'rounded-none rounded-r-2xl',\n        clean: 'rounded-md h-6 mr-1',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\ninterface FilterBlockContextValue<\n  TData = unknown,\n  TType extends ColumnDataType = ColumnDataType,\n> {\n  filter: FilterModel<TType>\n  column: Column<TData, TType>\n}\n\nconst FilterBlockContext = createContext<FilterBlockContextValue | null>(null)\n\nfunction useFilterBlockContext<\n  TData = unknown,\n  TType extends ColumnDataType = ColumnDataType,\n>(): FilterBlockContextValue<TData, TType> {\n  const context = useContext(FilterBlockContext)\n  if (!context) {\n    throw new Error(\n      'FilterBlock compound components must be used within FilterBlock',\n    )\n  }\n  return context as FilterBlockContextValue<TData, TType>\n}\n\nexport interface FilterBlockProps<TData, TType extends ColumnDataType>\n  extends Omit<ComponentPropsWithoutRef<'div'>, 'children'>,\n    VariantProps<typeof filterBlockVariants> {\n  filter: FilterModel<TType>\n  column: Column<TData, TType>\n  children?: React.ReactNode\n}\n\nexport function FilterBlock<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  children,\n  className,\n  variant: variantProp,\n  ...props\n}: FilterBlockProps<TData, TType>) {\n  const contextVariant = useFilterVariant()\n  const variant = variantProp ?? contextVariant ?? 'default'\n\n  return (\n    <FilterBlockContext.Provider\n      value={{ filter, column } as FilterBlockContextValue}\n    >\n      <div\n        data-slot=\"filter-block\"\n        data-column-id={column.id}\n        data-column-type={column.type}\n        className={cn(filterBlockVariants({ variant }), className)}\n        {...props}\n      >\n        {children}\n      </div>\n    </FilterBlockContext.Provider>\n  )\n}\n\nexport namespace FilterBlock {\n  export type Props<TData, TType extends ColumnDataType> = FilterBlockProps<\n    TData,\n    TType\n  >\n}\n\nexport interface FilterBlockSubjectProps\n  extends Omit<ComponentPropsWithoutRef<'span'>, 'children'> {}\n\nfunction Subject(props: FilterBlockSubjectProps = {}) {\n  const { column } = useFilterBlockContext()\n  const entityName = useFilterEntityName()\n  return <FilterSubject column={column} entityName={entityName} {...props} />\n}\n\nexport interface FilterBlockOperatorProps\n  extends Omit<\n    ComponentPropsWithoutRef<typeof Button>,\n    'onClick' | 'children'\n  > {}\n\nfunction Operator(props: FilterBlockOperatorProps = {}) {\n  const { filter, column } = useFilterBlockContext()\n  const actions = useFilterActions()\n  const locale = useFilterLocale()\n  return (\n    <FilterOperator\n      filter={filter}\n      column={column}\n      actions={actions}\n      locale={locale}\n      {...props}\n    />\n  )\n}\n\nexport interface FilterBlockValueProps {\n  className?: string\n}\n\nfunction Value({ className }: FilterBlockValueProps = {}) {\n  const { filter, column } = useFilterBlockContext()\n  const actions = useFilterActions()\n  const strategy = useFilterStrategy()\n  const locale = useFilterLocale()\n  const entityName = useFilterEntityName()\n  return (\n    <FilterValue\n      filter={filter}\n      column={column}\n      actions={actions}\n      strategy={strategy}\n      locale={locale}\n      entityName={entityName}\n      className={className}\n    />\n  )\n}\n\nexport interface FilterBlockRemoveProps\n  extends Omit<ComponentPropsWithoutRef<typeof Button>, 'onClick' | 'variant'>,\n    VariantProps<typeof filterBlockRemoveVariants> {}\n\nfunction Remove({\n  className,\n  variant: variantProp,\n  ...props\n}: FilterBlockRemoveProps = {}) {\n  const { filter } = useFilterBlockContext()\n  const actions = useFilterActions()\n  const contextVariant = useFilterVariant()\n  const variant = variantProp ?? contextVariant ?? 'default'\n\n  return (\n    <Button\n      data-slot=\"filter-block-remove\"\n      variant=\"ghost\"\n      className={cn(filterBlockRemoveVariants({ variant }), className)}\n      onClick={() => actions.removeFilter(filter.columnId)}\n      {...props}\n    >\n      <X className=\"size-4\" />\n    </Button>\n  )\n}\n\nFilterBlock.Subject = Subject\nFilterBlock.Operator = Operator\nFilterBlock.Value = Value\nFilterBlock.Remove = Remove\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-list/filter-block.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-list/index.ts",
      "content": "export { FilterBlock } from './filter-block'\nexport { FilterList, FilterListMobileContainer } from './filter-list'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-list/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-menu.tsx",
      "content": "import type {\n  ActionMenuRootProps,\n  MenuDef,\n  SubmenuDef,\n} from '@bazza-ui/action-menu'\nimport {\n  type Column,\n  type ColumnDataType,\n  type DataTableFilterActions,\n  type FilterModel,\n  type FilterStrategy,\n  type FiltersState,\n  isAnyOf,\n  type Locale,\n  t,\n} from '@bazza-ui/filters'\nimport { Slot } from '@radix-ui/react-slot'\nimport { ListFilterIcon } from 'lucide-react'\nimport {\n  type ComponentPropsWithoutRef,\n  createContext,\n  isValidElement,\n  memo,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n} from 'react'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\nimport { ActionMenu } from '@/registry/action-menu'\nimport { useFilterVariant, type FilterVariant } from '../context'\nimport {\n  createMultiOptionMenu,\n  createOptionMenu,\n  createTextMenu,\n  FilterValueDateController,\n  FilterValueNumberController,\n  OptionItem,\n} from './filter-value/index'\n\ninterface FilterMenuContextValue {\n  hasVisibleFilters: boolean\n  locale: Locale\n  variant?: FilterVariant\n}\n\nconst FilterMenuContext = createContext<FilterMenuContextValue | null>(null)\n\nfunction useFilterMenuContext() {\n  const context = useContext(FilterMenuContext)\n  if (!context) {\n    throw new Error(\n      'FilterMenu compound components must be used within FilterMenu',\n    )\n  }\n  return context\n}\n\ninterface FilterMenuProps<TData> {\n  filters: FiltersState\n  columns: Column<TData>[]\n  actions: DataTableFilterActions\n  strategy: FilterStrategy\n  locale?: Locale\n  children?: React.ReactNode\n  actionMenuProps?: Partial<Omit<ActionMenuRootProps, 'menu' | 'children'>>\n  variant?: FilterVariant\n}\n\nfunction createDateMenu<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n  strategy,\n}: {\n  filter: FilterModel<'date'>\n  column: Column<TData, 'date'>\n  actions: DataTableFilterActions\n  locale?: Locale\n  strategy: FilterStrategy\n}): SubmenuDef {\n  return {\n    kind: 'submenu',\n    id: column.id,\n    icon: column.icon,\n    label: column.displayName,\n    render: () => (\n      <FilterValueDateController\n        filter={filter}\n        column={column}\n        actions={actions}\n        strategy={strategy}\n        locale={locale}\n      />\n    ),\n    nodes: [],\n  }\n}\n\nfunction createNumberMenu<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n  strategy,\n}: {\n  filter: FilterModel<'number'>\n  column: Column<TData, 'number'>\n  actions: DataTableFilterActions\n  locale?: Locale\n  strategy: FilterStrategy\n}): SubmenuDef {\n  return {\n    kind: 'submenu' as const,\n    id: column.id,\n    icon: column.icon,\n    label: column.displayName,\n    render: () => (\n      <FilterValueNumberController\n        filter={filter}\n        column={column}\n        actions={actions}\n        strategy={strategy}\n        locale={locale}\n      />\n    ),\n    nodes: [],\n  }\n}\n\n// Trigger component using Slot pattern\nexport interface FilterMenuTriggerProps\n  extends ComponentPropsWithoutRef<'button'> {\n  asChild?: boolean\n}\n\nfunction FilterMenuTrigger({\n  asChild,\n  className,\n  children,\n  ...props\n}: FilterMenuTriggerProps) {\n  const { hasVisibleFilters, locale } = useFilterMenuContext()\n  const Comp = asChild ? Slot : Button\n\n  return (\n    <ActionMenu.Trigger asChild>\n      <Comp\n        data-slot=\"filter-menu-trigger\"\n        data-state={hasVisibleFilters ? 'has-filters' : 'empty'}\n        variant=\"outline\"\n        className={cn('h-7', hasVisibleFilters && 'w-fit !px-2', className)}\n        {...props}\n      >\n        {asChild ? (\n          children\n        ) : (\n          <>\n            <ListFilterIcon className=\"size-4\" />\n            {!hasVisibleFilters && <span>{t('filter', locale)}</span>}\n          </>\n        )}\n      </Comp>\n    </ActionMenu.Trigger>\n  )\n}\n\nfunction __FilterMenu<TData>({\n  filters,\n  columns,\n  actions,\n  strategy,\n  locale = 'en',\n  children,\n  actionMenuProps,\n  variant: variantProp,\n}: FilterMenuProps<TData>) {\n  const contextVariant = useFilterVariant()\n  const variant = variantProp ?? contextVariant\n\n  // Use ref to capture current filters value for loaders\n  const filtersRef = useRef(filters)\n  useEffect(() => {\n    filtersRef.current = filters\n  }, [filters])\n\n  // Use Map to store initial selected values for each column (for sticky grouping)\n  const initialSelectedValuesMapRef = useRef<Map<string, Set<string> | null>>(\n    new Map(),\n  )\n\n  const visibleColumns = useMemo(\n    () => columns.filter((c) => !c.hidden),\n    [columns],\n  )\n\n  const visibleFilters = useMemo(\n    () =>\n      filters.filter((f) => visibleColumns.find((c) => c.id === f.columnId)),\n    [filters, visibleColumns],\n  )\n\n  const hasVisibleFilters = visibleFilters.length > 0\n\n  const contextValue: FilterMenuContextValue = useMemo(\n    () => ({ hasVisibleFilters, locale, variant }),\n    [hasVisibleFilters, locale, variant],\n  )\n\n  const menu: MenuDef = useMemo(\n    () => ({\n      id: 'filter-menu',\n      search: {\n        minLength: 2,\n      },\n      nodes: columns.map((column) => {\n        if (column.type === 'text') {\n          const textFilter = filters.find((f) => f.columnId === column.id)\n          return createTextMenu({\n            filter: textFilter as FilterModel,\n            column: column as Column<TData, 'text'>,\n            actions,\n            locale,\n            strategy,\n          })\n        }\n\n        if (column.type === 'date') {\n          const dateFilter = filters.find((f) => f.columnId === column.id)\n          return createDateMenu({\n            filter: dateFilter as FilterModel<'date'>,\n            column: column as Column<TData, 'date'>,\n            actions,\n            locale,\n            strategy,\n          })\n        }\n\n        if (column.type === 'number') {\n          const numberFilter = filters.find((f) => f.columnId === column.id)\n          return createNumberMenu({\n            filter: numberFilter as FilterModel<'number'>,\n            column: column as Column<TData, 'number'>,\n            actions,\n            locale,\n            strategy,\n          })\n        }\n\n        // Create submenu with middleware for sticky grouping\n        // Create a ref-like object for this specific column's initial values\n        const getColumnRef = (columnId: string) => ({\n          get current() {\n            return initialSelectedValuesMapRef.current.get(columnId) ?? null\n          },\n          set current(value: Set<string> | null) {\n            initialSelectedValuesMapRef.current.set(columnId, value)\n          },\n        })\n\n        return {\n          kind: 'submenu',\n          id: column.id,\n          icon: column.icon,\n          label: column.displayName,\n          ...(column.type === 'option'\n            ? createOptionMenu({\n                filter: undefined as any, // Not used, middleware reads from ref\n                column: column as Column<TData, 'option'>,\n                actions,\n                locale,\n                strategy,\n                getFilter: () =>\n                  filtersRef.current.find((f) => f.columnId === column.id) as\n                    | FilterModel<'option'>\n                    | undefined,\n                initialSelectedValuesRef: getColumnRef(column.id) as any,\n              })\n            : column.type === 'multiOption'\n              ? createMultiOptionMenu({\n                  filter: undefined as any, // Not used, middleware reads from ref\n                  column: column as Column<TData, 'multiOption'>,\n                  actions,\n                  locale,\n                  strategy,\n                  getFilter: () =>\n                    filtersRef.current.find((f) => f.columnId === column.id) as\n                      | FilterModel<'multiOption'>\n                      | undefined,\n                  initialSelectedValuesRef: getColumnRef(column.id) as any,\n                })\n              : {}),\n        } as SubmenuDef\n      }),\n    }),\n    [columns, filters, actions, locale, strategy],\n  )\n\n  return (\n    <FilterMenuContext.Provider value={contextValue}>\n      <ActionMenu\n        slots={{\n          Item: OptionItem,\n        }}\n        menu={menu}\n        {...actionMenuProps}\n      >\n        {children ?? <FilterMenuTrigger />}\n      </ActionMenu>\n    </FilterMenuContext.Provider>\n  )\n}\n\nconst FilterMenuRoot = memo(__FilterMenu) as typeof __FilterMenu\n\nexport const FilterMenu = FilterMenuRoot as typeof FilterMenuRoot & {\n  Trigger: typeof FilterMenuTrigger\n}\n\nFilterMenu.Trigger = FilterMenuTrigger\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-menu.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-menu/filter-menu-context.tsx",
      "content": "'use client'\n\nimport type { ActionMenuRootProps } from '@bazza-ui/action-menu'\nimport {\n  useFilterActions,\n  useFilterContext,\n  useFilterLocale,\n  useFilterStrategy,\n} from '../../context'\nimport { FilterMenu } from '../filter-menu'\n\ninterface FilterMenuWithContextProps {\n  children?: React.ReactNode\n  actionMenuProps?: Partial<Omit<ActionMenuRootProps, 'menu' | 'children'>>\n}\n\nexport function FilterMenuWithContext({\n  children,\n  actionMenuProps,\n}: FilterMenuWithContextProps = {}) {\n  const { columns, filters } = useFilterContext()\n  const actions = useFilterActions()\n  const strategy = useFilterStrategy()\n  const locale = useFilterLocale()\n\n  return (\n    <FilterMenu\n      columns={columns}\n      filters={filters}\n      actions={actions}\n      strategy={strategy}\n      locale={locale}\n      actionMenuProps={actionMenuProps}\n    >\n      {children}\n    </FilterMenu>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-menu/filter-menu-context.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-operator.tsx",
      "content": "import type { MenuDef } from '@bazza-ui/action-menu'\nimport {\n  booleanFilterOperators,\n  type Column,\n  type ColumnDataType,\n  type DataTableFilterActions,\n  dateFilterOperators,\n  type FilterModel,\n  type FilterOperators,\n  filterTypeOperatorDetails,\n  type Locale,\n  multiOptionFilterOperators,\n  numberFilterOperators,\n  optionFilterOperators,\n  t,\n  textFilterOperators,\n} from '@bazza-ui/filters'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport type { ComponentPropsWithoutRef } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\nimport { ActionMenu } from '@/registry/action-menu'\nimport { useFilterVariant } from '../context'\n\nconst filterOperatorVariants = cva(\n  'm-0 w-fit whitespace-nowrap p-0 px-2 text-xs',\n  {\n    variants: {\n      variant: {\n        default: 'h-full rounded-none',\n        clean:\n          'border-none h-6 rounded-md shadow-xs bg-background hover:bg-background aria-expanded:bg-background aria-expanded:text-primary',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\ninterface FilterOperatorProps<TData, TType extends ColumnDataType>\n  extends Omit<ComponentPropsWithoutRef<typeof Button>, 'onClick' | 'variant'>,\n    VariantProps<typeof filterOperatorVariants> {\n  column: Column<TData, TType>\n  filter: FilterModel<TType>\n  actions: DataTableFilterActions\n  locale?: Locale\n}\n\nfunction createOperatorMenu<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterOperatorProps<TData, TType>): MenuDef {\n  const getOperators = () => {\n    switch (column.type) {\n      case 'option':\n        return optionFilterOperators\n      case 'multiOption':\n        return multiOptionFilterOperators\n      case 'date':\n        return dateFilterOperators\n      case 'text':\n        return textFilterOperators\n      case 'number':\n        return numberFilterOperators\n      case 'boolean':\n        return booleanFilterOperators\n      default:\n        return {}\n    }\n  }\n\n  const operators = getOperators() as Record<string, any>\n  const currentOperator = operators[filter.operator]\n  const relatedOperators = Object.values(operators).filter(\n    (o: any) => currentOperator && o.target === currentOperator.target,\n  )\n\n  return {\n    id: `filter-operator-${column.id}`,\n    hideSearchUntilActive: true,\n    nodes: [\n      {\n        kind: 'group' as const,\n        variant: 'radio' as const,\n        id: 'operators',\n        value: filter.operator,\n        onValueChange: (value) => {\n          actions.setFilterOperator(column.id, value as any)\n        },\n        nodes: relatedOperators.map((op: any) => ({\n          kind: 'item' as const,\n          variant: 'radio' as const,\n          id: op.value,\n          label: t(op.key, locale),\n        })),\n      },\n    ],\n  }\n}\n\n// Renders the filter operator display and menu for a given column filter\n// The filter operator display is the label and icon for the filter operator\n// The filter operator menu is the dropdown menu for the filter operator\nexport function FilterOperator<TData, TType extends ColumnDataType>({\n  column,\n  filter,\n  actions,\n  locale = 'en',\n  className,\n  variant: variantProp,\n  ...props\n}: FilterOperatorProps<TData, TType>) {\n  const contextVariant = useFilterVariant()\n  const variant = variantProp ?? contextVariant ?? 'default'\n  const menu = createOperatorMenu({ filter, column, actions, locale })\n\n  return (\n    <ActionMenu menu={menu}>\n      <ActionMenu.Trigger asChild>\n        <Button\n          data-slot=\"filter-operator\"\n          data-column-type={column.type}\n          data-operator={filter.operator}\n          variant=\"ghost\"\n          className={cn(\n            filterOperatorVariants({ variant }),\n            variant === 'default' ? 'text-muted-foreground' : '',\n            className,\n          )}\n          onClick={(e) => {\n            if (column.type !== 'boolean') return\n            e.preventDefault()\n            const opDetails =\n              filterTypeOperatorDetails.boolean[\n                filter.operator as FilterOperators['boolean']\n              ]\n\n            actions.setFilterOperator(\n              column.id,\n              opDetails.isNegated ? opDetails.negationOf : opDetails.negation,\n            )\n          }}\n          {...props}\n        >\n          <FilterOperatorDisplay\n            filter={filter}\n            columnType={column.type}\n            locale={locale}\n          />\n        </Button>\n      </ActionMenu.Trigger>\n    </ActionMenu>\n  )\n}\n\ninterface FilterOperatorDisplayProps<TType extends ColumnDataType> {\n  filter: FilterModel<TType>\n  columnType: TType\n  locale?: Locale\n}\n\nexport function FilterOperatorDisplay<TType extends ColumnDataType>({\n  filter,\n  columnType,\n  locale = 'en',\n}: FilterOperatorDisplayProps<TType>) {\n  const operator = filterTypeOperatorDetails[columnType][filter.operator]\n  const label = t(operator.key, locale)\n\n  return <span>{label}</span>\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-operator.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-subject.tsx",
      "content": "import type { Column, ColumnDataType } from '@bazza-ui/filters'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { type ComponentPropsWithoutRef, isValidElement } from 'react'\nimport { cn } from '@/lib/utils'\nimport { useFilterVariant } from '../context'\n\nconst filterSubjectVariants = cva(\n  'flex select-none items-center gap-1 whitespace-nowrap px-2',\n  {\n    variants: {\n      variant: {\n        default: 'font-medium',\n        clean: 'text-primary/75',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\ninterface FilterSubjectProps<TData, TType extends ColumnDataType>\n  extends ComponentPropsWithoutRef<'span'>,\n    VariantProps<typeof filterSubjectVariants> {\n  column: Column<TData, TType>\n  entityName?: string\n}\n\nexport function FilterSubject<TData, TType extends ColumnDataType>({\n  column,\n  entityName,\n  className,\n  variant: variantProp,\n  ...props\n}: FilterSubjectProps<TData, TType>) {\n  const contextVariant = useFilterVariant()\n  const variant = variantProp ?? contextVariant ?? 'default'\n\n  const subject = column.type === 'boolean' ? entityName : column.displayName\n\n  const { icon: Icon } = column\n  const hasIcon = !!Icon\n\n  return (\n    <span\n      data-slot=\"filter-subject\"\n      data-column-type={column.type}\n      className={cn(filterSubjectVariants({ variant }), className)}\n      {...props}\n    >\n      {hasIcon &&\n        (isValidElement(Icon) ? (\n          Icon\n        ) : (\n          <Icon className=\"size-4 text-primary stroke-[2.25px]\" />\n        ))}\n\n      <span>{subject}</span>\n    </span>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-subject.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/index.tsx",
      "content": "/** biome-ignore-all lint/correctness/useUniqueElementIds: not needed */\n\n'use client'\n\nimport type { MenuDef } from '@bazza-ui/action-menu'\nimport type { Column, ColumnDataType, FilterModel } from '@bazza-ui/filters'\nimport { cva } from 'class-variance-authority'\nimport { memo, useEffect, useMemo, useRef } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\nimport { ActionMenu } from '@/registry/action-menu'\nimport { useFilterVariant } from '../../context'\nimport { FilterValueBooleanDisplay } from './boolean'\nimport { FilterValueDateController, FilterValueDateDisplay } from './date'\nimport {\n  createMultiOptionMenu,\n  FilterValueMultiOptionDisplay,\n} from './multi-option'\nimport { FilterValueNumberController, FilterValueNumberDisplay } from './number'\nimport { createOptionMenu, FilterValueOptionDisplay } from './option'\nimport { OptionItem } from './shared/option-item'\nimport { TextItem } from './shared/text-item'\nimport type {\n  FilterValueControllerProps,\n  FilterValueDisplayProps,\n  FilterValueProps,\n} from './shared/types'\nimport { createTextMenu, FilterValueTextDisplay } from './text'\n\nconst filterValueVariants = cva(\n  'm-0 w-fit whitespace-nowrap p-0 px-2 text-xs',\n  {\n    variants: {\n      variant: {\n        default: 'h-full rounded-none',\n        clean:\n          'h-6 rounded-md text-primary/75 hover:text-primary hover:bg-background hover:shadow-xs aria-expanded:bg-background aria-expanded:text-primary',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nexport const FilterValue = memo(__FilterValue) as typeof __FilterValue\n\nfunction __FilterValue<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  strategy,\n  locale,\n  entityName,\n  className,\n  variant: variantProp,\n}: FilterValueProps<TData, TType>) {\n  const contextVariant = useFilterVariant()\n  const variant = variantProp ?? contextVariant ?? 'default'\n\n  // Use ref to capture current filter value for loaders\n  const filterRef = useRef(filter)\n  useEffect(() => {\n    filterRef.current = filter\n  }, [filter])\n\n  // Use ref to persist initial selected values across re-renders for sticky grouping\n  const initialSelectedValuesRef = useRef<Set<string> | null>(null)\n\n  // Don't open the value controller for boolean columns\n  // We can toggle the filter operator instead\n  function handleClick(e: React.MouseEvent<HTMLButtonElement>) {\n    if (column.type === 'boolean') e.preventDefault()\n  }\n\n  // Create menu configuration for all column types\n  const menu: MenuDef = useMemo(() => {\n    // For text, option, and multiOption types, use the existing menu creators\n    if (column.type === 'text') {\n      return {\n        id: `filter-value-${column.id}`,\n        ...(createTextMenu({\n          filter: filter as FilterModel<'text'>,\n          column: column as Column<TData, 'text'>,\n          actions,\n          locale,\n          strategy,\n        }) as any),\n      }\n    }\n\n    if (column.type === 'option') {\n      return {\n        id: `filter-value-${column.id}`,\n        ...createOptionMenu({\n          filter: undefined as any,\n          column: column as Column<TData, 'option'>,\n          actions,\n          locale,\n          strategy,\n          getFilter: () =>\n            filterRef.current as FilterModel<'option'> | undefined,\n          initialSelectedValuesRef,\n        }),\n      }\n    }\n\n    if (column.type === 'multiOption') {\n      return {\n        id: `filter-value-${column.id}`,\n        ...createMultiOptionMenu({\n          filter: undefined as any,\n          column: column as Column<TData, 'multiOption'>,\n          actions,\n          locale,\n          strategy,\n          getFilter: () =>\n            filterRef.current as FilterModel<'multiOption'> | undefined,\n          initialSelectedValuesRef,\n        }),\n      }\n    }\n\n    // For date type, use custom render function\n    if (column.type === 'date') {\n      return {\n        id: `filter-value-${column.id}`,\n        nodes: [],\n        render: () => (\n          <FilterValueDateController\n            filter={filter as FilterModel<'date'>}\n            column={column as Column<TData, 'date'>}\n            actions={actions}\n            strategy={strategy}\n            locale={locale}\n          />\n        ),\n      }\n    }\n\n    // For number type, use custom render function\n    if (column.type === 'number') {\n      return {\n        id: `filter-value-${column.id}`,\n        nodes: [],\n        render: () => (\n          <FilterValueNumberController\n            filter={filter as FilterModel<'number'>}\n            column={column as Column<TData, 'number'>}\n            actions={actions}\n            strategy={strategy}\n            locale={locale}\n          />\n        ),\n      }\n    }\n\n    // For boolean type, use a custom render function\n    return {\n      id: `filter-value-${column.id}`,\n      nodes: [],\n      render: () => (\n        <FilterValueController\n          filter={filter as any}\n          column={column as any}\n          actions={actions}\n          strategy={strategy}\n          locale={locale}\n        />\n      ),\n    }\n  }, [column, filter, actions, locale, strategy])\n\n  return (\n    <ActionMenu\n      slots={{\n        Item: (column.type === 'text' ? TextItem : OptionItem) as any,\n      }}\n      menu={menu}\n      onOpenChange={(open) => {\n        // Reset initial selected values when menu closes to capture fresh state on next open\n        if (!open) {\n          initialSelectedValuesRef.current = null\n        }\n      }}\n    >\n      <ActionMenu.Trigger asChild>\n        <Button\n          data-slot=\"filter-value\"\n          data-column-type={column.type}\n          variant=\"ghost\"\n          className={cn(\n            filterValueVariants({ variant }),\n            column.type === 'boolean' &&\n              variant === 'default' &&\n              'hover:bg-inherit',\n            className,\n          )}\n          onClick={handleClick}\n        >\n          <FilterValueDisplay\n            filter={filter}\n            column={column}\n            actions={actions}\n            locale={locale}\n            entityName={entityName}\n          />\n        </Button>\n      </ActionMenu.Trigger>\n    </ActionMenu>\n  )\n}\n\nexport function FilterValueDisplay<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n  entityName,\n}: FilterValueDisplayProps<TData, TType>) {\n  switch (column.type) {\n    case 'option':\n      return (\n        <FilterValueOptionDisplay\n          filter={filter as FilterModel<'option'>}\n          column={column as Column<TData, 'option'>}\n          actions={actions}\n          locale={locale}\n        />\n      )\n    case 'multiOption':\n      return (\n        <FilterValueMultiOptionDisplay\n          filter={filter as FilterModel<'multiOption'>}\n          column={column as Column<TData, 'multiOption'>}\n          actions={actions}\n          locale={locale}\n        />\n      )\n    case 'date':\n      return (\n        <FilterValueDateDisplay\n          filter={filter as FilterModel<'date'>}\n          column={column as Column<TData, 'date'>}\n          actions={actions}\n          locale={locale}\n        />\n      )\n    case 'text':\n      return (\n        <FilterValueTextDisplay\n          filter={filter as FilterModel<'text'>}\n          column={column as Column<TData, 'text'>}\n          actions={actions}\n          locale={locale}\n        />\n      )\n    case 'number':\n      return (\n        <FilterValueNumberDisplay\n          filter={filter as FilterModel<'number'>}\n          column={column as Column<TData, 'number'>}\n          actions={actions}\n          locale={locale}\n        />\n      )\n    case 'boolean':\n      return (\n        <FilterValueBooleanDisplay\n          filter={filter as FilterModel<'boolean'>}\n          column={column as Column<TData, 'boolean'>}\n          actions={actions}\n          locale={locale}\n          entityName={entityName}\n        />\n      )\n    default:\n      return null\n  }\n}\n\nexport const FilterValueController = memo(\n  __FilterValueController,\n) as typeof __FilterValueController\n\nfunction __FilterValueController<TData, TType extends ColumnDataType>({\n  filter,\n  column,\n  actions,\n  strategy,\n  locale = 'en',\n}: FilterValueControllerProps<TData, TType>) {\n  switch (column.type) {\n    case 'date':\n      return (\n        <FilterValueDateController\n          filter={filter as FilterModel<'date'>}\n          column={column as Column<TData, 'date'>}\n          actions={actions}\n          strategy={strategy}\n          locale={locale}\n        />\n      )\n    case 'number':\n      return (\n        <FilterValueNumberController\n          filter={filter as FilterModel<'number'>}\n          column={column as Column<TData, 'number'>}\n          actions={actions}\n          strategy={strategy}\n          locale={locale}\n        />\n      )\n    default:\n      return null\n  }\n}\n\nexport {\n  FilterValueBooleanController,\n  FilterValueBooleanDisplay,\n} from './boolean'\n// Re-export utility functions\nexport {\n  FilterValueDateController,\n  FilterValueDateDisplay,\n  formatDateRange,\n} from './date'\nexport {\n  createMultiOptionMenu,\n  FilterValueMultiOptionDisplay,\n} from './multi-option'\nexport { FilterValueNumberController, FilterValueNumberDisplay } from './number'\nexport { createOptionMenu, FilterValueOptionDisplay } from './option'\n// Re-export utility components\nexport { OptionItem } from './shared/option-item'\nexport { TextItem } from './shared/text-item'\n// Re-export types\nexport type {\n  FilterValueControllerProps,\n  FilterValueDisplayProps,\n  FilterValueProps,\n} from './shared/types'\n// Re-export all display components\n// Re-export all controller components\n// Re-export menu creators\nexport {\n  createTextFilterMiddleware,\n  createTextMenu,\n  FilterValueTextDisplay,\n} from './text'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/index.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/boolean/controller.tsx",
      "content": "'use client'\n\nimport {\n  Command,\n  CommandGroup,\n  CommandItem,\n  CommandList,\n} from '@/components/ui/command'\nimport { Switch } from '@/components/ui/switch'\nimport type { FilterValueControllerProps } from '../shared/types'\n\nexport function FilterValueBooleanController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, 'boolean'>) {\n  const handleChange = (value: boolean) => {\n    actions.setFilterValue(column, [value])\n  }\n\n  return (\n    <Command>\n      <CommandList className=\"max-h-fit\">\n        <CommandGroup>\n          <CommandItem>\n            <Switch\n              checked={filter?.values[0] ?? false}\n              onCheckedChange={handleChange}\n            />\n          </CommandItem>\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/boolean/controller.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/boolean/display.tsx",
      "content": "'use client'\n\nimport type { FilterValueDisplayProps } from '../shared/types'\n\nexport function FilterValueBooleanDisplay<TData>({\n  filter,\n  column,\n}: FilterValueDisplayProps<TData, 'boolean'>) {\n  if (!filter || filter.values.length === 0) return null\n  return <span>{column.toggledStateName}</span>\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/boolean/display.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/boolean/index.ts",
      "content": "export { FilterValueBooleanController } from './controller'\nexport { FilterValueBooleanDisplay } from './display'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/boolean/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/date/controller.tsx",
      "content": "'use client'\n\nimport { isEqual } from 'date-fns'\nimport { useState } from 'react'\nimport type { DateRange } from 'react-day-picker'\nimport { Calendar } from '@/components/ui/calendar'\nimport { Command, CommandGroup, CommandList } from '@/components/ui/command'\nimport type { FilterValueControllerProps } from '../shared/types'\n\nexport function FilterValueDateController<TData>({\n  filter,\n  column,\n  actions,\n}: FilterValueControllerProps<TData, 'date'>) {\n  const [date, setDate] = useState<DateRange | undefined>({\n    from: filter?.values[0] ?? new Date(),\n    to: filter?.values[1] ?? undefined,\n  })\n\n  function changeDateRange(value: DateRange | undefined) {\n    const start = value?.from\n    const end =\n      start && value && value.to && !isEqual(start, value.to)\n        ? value.to\n        : undefined\n\n    setDate({ from: start, to: end })\n\n    const isRange = start && end\n    const newValues = isRange ? [start, end] : start ? [start] : []\n\n    actions.setFilterValue(column, newValues)\n  }\n\n  return (\n    <Command>\n      <CommandList className=\"max-h-fit\">\n        <CommandGroup>\n          <div>\n            <Calendar\n              mode=\"range\"\n              defaultMonth={date?.from}\n              selected={date}\n              onSelect={changeDateRange}\n              numberOfMonths={1}\n            />\n          </div>\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/date/controller.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/date/display.tsx",
      "content": "'use client'\n\nimport { format } from 'date-fns'\nimport { Ellipsis } from 'lucide-react'\nimport type { FilterValueDisplayProps } from '../shared/types'\n\nexport function formatDateRange(start: Date, end: Date) {\n  const sameMonth = start.getMonth() === end.getMonth()\n  const sameYear = start.getFullYear() === end.getFullYear()\n\n  if (sameMonth && sameYear) {\n    return `${format(start, 'MMM d')} - ${format(end, 'd, yyyy')}`\n  }\n\n  if (sameYear) {\n    return `${format(start, 'MMM d')} - ${format(end, 'MMM d, yyyy')}`\n  }\n\n  return `${format(start, 'MMM d, yyyy')} - ${format(end, 'MMM d, yyyy')}`\n}\n\nexport function FilterValueDateDisplay<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterValueDisplayProps<TData, 'date'>) {\n  if (!filter) return null\n  if (filter.values.length === 0) return <Ellipsis className=\"size-4\" />\n  if (filter.values.length === 1 && filter.values[0]) {\n    const value = filter.values[0]\n\n    const formattedDateStr = format(value, 'MMM d, yyyy')\n\n    return <span>{formattedDateStr}</span>\n  }\n  if (filter.values.length === 2 && filter.values[0] && filter.values[1]) {\n    const formattedRangeStr = formatDateRange(\n      filter.values[0],\n      filter.values[1],\n    )\n\n    return <span>{formattedRangeStr}</span>\n  }\n\n  return null\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/date/display.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/date/index.ts",
      "content": "export { FilterValueDateController } from './controller'\nexport { FilterValueDateDisplay, formatDateRange } from './display'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/date/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/multi-option/display.tsx",
      "content": "'use client'\n\nimport { take } from '@bazza-ui/filters'\nimport { cloneElement, isValidElement, useMemo } from 'react'\nimport type { FilterValueDisplayProps } from '../shared/types'\n\nexport function FilterValueMultiOptionDisplay<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterValueDisplayProps<TData, 'multiOption'>) {\n  const options = useMemo(() => column.getOptions(), [column])\n  const selected = options.filter((o) => filter.values.includes(o.value))\n\n  if (selected.length === 1 && selected[0]) {\n    const { label, icon: Icon } = selected[0]\n    const hasIcon = !!Icon\n    return (\n      <span className=\"inline-flex items-center gap-1.5\">\n        {hasIcon &&\n          (isValidElement(Icon) ? (\n            Icon\n          ) : (\n            <Icon className=\"size-4 text-primary\" />\n          ))}\n\n        <span>{label}</span>\n      </span>\n    )\n  }\n\n  const name = column.displayName.toLowerCase()\n\n  const hasOptionIcons = !options?.some((o) => !o.icon)\n\n  return (\n    <div className=\"inline-flex items-center gap-1.5\">\n      {hasOptionIcons && (\n        <div key=\"icons\" className=\"inline-flex items-center gap-0.5\">\n          {take(selected, 3).map(({ value, icon }) => {\n            const Icon = icon!\n            return isValidElement(Icon) ? (\n              cloneElement(Icon, { key: value })\n            ) : (\n              <Icon key={value} className=\"size-4\" />\n            )\n          })}\n        </div>\n      )}\n      <span>\n        {selected.length} {name}\n      </span>\n    </div>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/multi-option/display.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/multi-option/index.ts",
      "content": "export { FilterValueMultiOptionDisplay } from './display'\nexport { createMultiOptionMenu } from './menu'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/multi-option/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/multi-option/menu.tsx",
      "content": "import type { MenuMiddleware, NodeDef, SubmenuDef } from '@bazza-ui/action-menu'\nimport type { ColumnOptionExtended } from '@bazza-ui/filters'\nimport type { FilterValueControllerProps } from '../shared/types'\n\n/**\n * Creates multiOption menu with sticky grouping\n * Sticky grouping keeps items in their original groups (selected/unselected) based on initial state\n * Uses nodes for reactive updates and middleware to maintain grouping during search\n */\nexport function createMultiOptionMenu<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n  getFilter,\n  initialSelectedValuesRef,\n}: FilterValueControllerProps<TData, 'multiOption'> & {\n  getFilter?: () => any\n  initialSelectedValuesRef: React.RefObject<Set<string> | null>\n}): Pick<SubmenuDef<unknown, ColumnOptionExtended>, 'nodes' | 'middleware'> {\n  const currentFilter = (getFilter ? getFilter() : filter) || filter\n\n  // Capture initial state for sticky grouping (only once when menu first opens)\n  if (!initialSelectedValuesRef.current) {\n    initialSelectedValuesRef.current = new Set(currentFilter?.values || [])\n  }\n\n  const counts = column.getFacetedUniqueValues()\n  const nodes: NodeDef<ColumnOptionExtended>[] = column\n    .getOptions()\n    .map((option) => {\n      const wasInitiallySelected = initialSelectedValuesRef.current!.has(\n        option.value,\n      )\n      const isCurrentlySelected =\n        currentFilter?.values.includes(option.value) ?? false\n\n      return {\n        kind: 'item' as const,\n        variant: 'checkbox' as const,\n        id: option.value,\n        label: option.label,\n        keywords: [option.value, option.label],\n        icon: option.icon,\n        checked: isCurrentlySelected,\n        onCheckedChange: (checked: boolean) => {\n          if (checked) {\n            actions.addFilterValue(column, [option.value])\n          } else {\n            actions.removeFilterValue(column, [option.value])\n          }\n        },\n        data: {\n          value: option.value,\n          label: option.label,\n          icon: option.icon,\n          count: counts?.get(option.value) ?? 0,\n          initialGroup: wasInitiallySelected ? 'selected' : 'unselected',\n        } as ColumnOptionExtended,\n        closeOnSelect: false,\n      } as any\n    })\n\n  const middleware: MenuMiddleware<ColumnOptionExtended> = {\n    transformNodes: (context) => {\n      const { nodes: filteredNodes } = context\n\n      // Group the filtered items by their initialGroup metadata (sticky grouping)\n      const selectedItems = filteredNodes.filter(\n        (node: any) => node.data?.initialGroup === 'selected',\n      )\n      const unselectedItems = filteredNodes.filter(\n        (node: any) => node.data?.initialGroup === 'unselected',\n      )\n\n      const result: any[] = []\n\n      // Add selected items\n      if (selectedItems.length > 0) {\n        result.push(...selectedItems)\n      }\n\n      // Add separator between selected and unselected if both exist\n      if (selectedItems.length > 0 && unselectedItems.length > 0) {\n        result.push({\n          kind: 'separator' as const,\n          id: `${column.id}-separator`,\n        })\n      }\n\n      // Add unselected items\n      if (unselectedItems.length > 0) {\n        result.push(...unselectedItems)\n      }\n\n      return result\n    },\n  }\n\n  return {\n    nodes,\n    middleware,\n  }\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/multi-option/menu.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/number/controller.tsx",
      "content": "'use client'\n\nimport {\n  createNumberRange,\n  type MinMaxReturn,\n  numberFilterOperators,\n  t,\n} from '@bazza-ui/filters'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { Command, CommandGroup, CommandList } from '@/components/ui/command'\nimport { Slider } from '@/components/ui/slider'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { useDebounceCallback } from '../../../hooks/use-debounce-callback'\nimport { DebouncedInput } from '../../../ui/debounced-input'\nimport type { FilterValueControllerProps } from '../shared/types'\n\nexport function FilterValueNumberController<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterValueControllerProps<TData, 'number'>) {\n  const minMax = useMemo(\n    () => column.getFacetedMinMaxValues() as MinMaxReturn<'number'>,\n    [column],\n  )\n  const [sliderMin, sliderMax] = [\n    minMax ? minMax[0] : 0,\n    minMax ? minMax[1] : 0,\n  ]\n\n  // Local state for values\n  const [values, setValues] = useState(filter?.values ?? [0, 0])\n\n  // Sync with parent filter changes\n  useEffect(() => {\n    if (\n      filter?.values &&\n      filter.values.length === values.length &&\n      filter.values.every((v, i) => v === values[i])\n    ) {\n      setValues(filter.values)\n    }\n  }, [filter?.values, values])\n\n  const isNumberRange =\n    // filter && values.length === 2\n    filter && numberFilterOperators[filter.operator].target === 'multiple'\n\n  const setFilterOperatorDebounced = useDebounceCallback(\n    actions.setFilterOperator,\n    500,\n  )\n  const setFilterValueDebounced = useDebounceCallback(\n    actions.setFilterValue,\n    500,\n  )\n\n  const changeNumber = (value: number[]) => {\n    setValues(value)\n    setFilterValueDebounced(column as any, value)\n  }\n\n  const changeMinNumber = (value: number) => {\n    const newValues = createNumberRange([value, values[1]!])\n    setValues(newValues)\n    setFilterValueDebounced(column as any, newValues)\n  }\n\n  const changeMaxNumber = (value: number) => {\n    const newValues = createNumberRange([values[0]!, value])\n    setValues(newValues)\n    setFilterValueDebounced(column as any, newValues)\n  }\n\n  const changeType = useCallback(\n    (type: 'single' | 'range') => {\n      let newValues: number[] = []\n      if (type === 'single')\n        newValues = [values[0]!] // Keep the first value for single mode\n      else if (!minMax)\n        newValues = createNumberRange([values[0]!, values[1] ?? 0])\n      else {\n        const value = values[0]!\n        newValues =\n          value - minMax[0] < minMax[1] - value\n            ? createNumberRange([value, minMax[1]])\n            : createNumberRange([minMax[0], value])\n      }\n\n      const newOperator = type === 'single' ? 'is' : 'is between'\n\n      // Update local state\n      setValues(newValues)\n\n      // Cancel in-flight debounced calls to prevent flicker/race conditions\n      setFilterOperatorDebounced.cancel()\n      setFilterValueDebounced.cancel()\n\n      // Update global filter state atomically\n      actions.setFilterOperator(column.id, newOperator)\n      actions.setFilterValue(column, newValues)\n    },\n    [values, column, actions, minMax],\n  )\n\n  return (\n    <Command>\n      <CommandList className=\"w-[300px] px-2 py-2\">\n        <CommandGroup>\n          <div className=\"flex flex-col w-full\">\n            <Tabs\n              value={isNumberRange ? 'range' : 'single'}\n              onValueChange={(v) => changeType(v as 'single' | 'range')}\n            >\n              <TabsList className=\"w-full *:text-xs\">\n                <TabsTrigger value=\"single\">{t('single', locale)}</TabsTrigger>\n                <TabsTrigger value=\"range\">{t('range', locale)}</TabsTrigger>\n              </TabsList>\n              <TabsContent value=\"single\" className=\"flex flex-col gap-4 mt-4\">\n                {minMax && (\n                  <Slider\n                    value={[values[0]!]}\n                    onValueChange={(value) => changeNumber(value)}\n                    min={sliderMin}\n                    max={sliderMax}\n                    step={1}\n                    aria-orientation=\"horizontal\"\n                  />\n                )}\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs font-medium\">\n                    {t('value', locale)}\n                  </span>\n                  <DebouncedInput\n                    id=\"single\"\n                    type=\"number\"\n                    value={values[0]!.toString()} // Use values[0] directly\n                    onChange={(v) => changeNumber([Number(v)])}\n                  />\n                </div>\n              </TabsContent>\n              <TabsContent value=\"range\" className=\"flex flex-col gap-4 mt-4\">\n                {minMax && (\n                  <Slider\n                    value={values} // Use values directly\n                    onValueChange={changeNumber}\n                    min={sliderMin}\n                    max={sliderMax}\n                    step={1}\n                    aria-orientation=\"horizontal\"\n                  />\n                )}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-medium\">\n                      {t('min', locale)}\n                    </span>\n                    <DebouncedInput\n                      type=\"number\"\n                      value={values[0]!}\n                      onChange={(v) => changeMinNumber(Number(v))}\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-medium\">\n                      {t('max', locale)}\n                    </span>\n                    <DebouncedInput\n                      type=\"number\"\n                      value={values[1]!}\n                      onChange={(v) => changeMaxNumber(Number(v))}\n                    />\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n        </CommandGroup>\n      </CommandList>\n    </Command>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/number/controller.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/number/display.tsx",
      "content": "'use client'\n\nimport { t } from '@bazza-ui/filters'\nimport type { FilterValueDisplayProps } from '../shared/types'\n\nexport function FilterValueNumberDisplay<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterValueDisplayProps<TData, 'number'>) {\n  if (!filter || !filter.values || filter.values.length === 0) return null\n\n  if (\n    filter.operator === 'is between' ||\n    filter.operator === 'is not between'\n  ) {\n    const minValue = filter.values[0]\n    const maxValue = filter.values[1]\n\n    return (\n      <span className=\"tabular-nums tracking-tight\">\n        {minValue} {t('and', locale)} {maxValue}\n      </span>\n    )\n  }\n\n  const value = filter.values[0]\n  return <span className=\"tabular-nums tracking-tight\">{value}</span>\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/number/display.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/number/index.ts",
      "content": "export { FilterValueNumberController } from './controller'\nexport { FilterValueNumberDisplay } from './display'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/number/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/option/display.tsx",
      "content": "'use client'\n\nimport { take } from '@bazza-ui/filters'\nimport { isValidElement, useMemo } from 'react'\nimport { cn } from '@/lib/utils'\nimport type { FilterValueDisplayProps } from '../shared/types'\n\nexport function FilterValueOptionDisplay<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterValueDisplayProps<TData, 'option'>) {\n  const options = useMemo(() => column.getOptions(), [column])\n  const selected = options.filter((o) => filter?.values.includes(o.value))\n\n  // We display the selected options based on how many are selected\n  //\n  // If there is only one option selected, we display its icon and label\n  //\n  // If there are multiple options selected, we display:\n  // 1) up to 3 icons of the selected options\n  // 2) the number of selected options\n  if (selected.length === 1 && selected[0]) {\n    const { label, icon: Icon } = selected[0]\n    const hasIcon = !!Icon\n    return (\n      <span className=\"inline-flex items-center gap-1\">\n        {hasIcon &&\n          (isValidElement(Icon) ? (\n            Icon\n          ) : (\n            <Icon className=\"size-4 text-primary\" />\n          ))}\n        <span>{label}</span>\n      </span>\n    )\n  }\n  const name = column.displayName.toLowerCase()\n  // TODO: Better pluralization for different languages\n  const pluralName = name.endsWith('s') ? `${name}es` : `${name}s`\n\n  const hasOptionIcons = !options?.some((o) => !o.icon)\n\n  return (\n    <div className=\"inline-flex items-center gap-0.5\">\n      {hasOptionIcons &&\n        take(selected, 3).map(({ value, icon }) => {\n          const Icon = icon!\n          return isValidElement(Icon) ? (\n            Icon\n          ) : (\n            <Icon key={value} className=\"size-4\" />\n          )\n        })}\n      <span className={cn(hasOptionIcons && 'ml-1.5')}>\n        {selected.length} {pluralName}\n      </span>\n    </div>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/option/display.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/option/index.ts",
      "content": "export { FilterValueOptionDisplay } from './display'\nexport { createOptionMenu } from './menu'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/option/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/option/menu.tsx",
      "content": "import type { MenuMiddleware, NodeDef, SubmenuDef } from '@bazza-ui/action-menu'\nimport type { ColumnOptionExtended } from '@bazza-ui/filters'\nimport type { FilterValueControllerProps } from '../shared/types'\n\n/**\n * Creates option menu with sticky grouping\n * Sticky grouping keeps items in their original groups (selected/unselected) based on initial state\n * Uses nodes for reactive updates and middleware to maintain grouping during search\n */\nexport function createOptionMenu<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n  getFilter,\n  initialSelectedValuesRef,\n}: FilterValueControllerProps<TData, 'option'> & {\n  getFilter?: () => any\n  initialSelectedValuesRef: React.RefObject<Set<string> | null>\n}): Pick<SubmenuDef, 'nodes' | 'middleware'> {\n  const currentFilter = (getFilter ? getFilter() : filter) || filter\n\n  // Capture initial state for sticky grouping (only once when menu first opens)\n  if (!initialSelectedValuesRef.current) {\n    initialSelectedValuesRef.current = new Set(currentFilter?.values || [])\n  }\n\n  const counts = column.getFacetedUniqueValues()\n  const nodes = column.getOptions().map((option) => {\n    const wasInitiallySelected = initialSelectedValuesRef.current!.has(\n      option.value,\n    )\n    const isCurrentlySelected =\n      currentFilter?.values.includes(option.value) ?? false\n\n    return {\n      kind: 'item' as const,\n      variant: 'checkbox' as const,\n      id: option.value,\n      label: option.label,\n      keywords: [option.value, option.label],\n      icon: option.icon,\n      checked: isCurrentlySelected,\n      onCheckedChange: (checked: boolean) => {\n        if (checked) {\n          actions.addFilterValue(column, [option.value])\n        } else {\n          actions.removeFilterValue(column, [option.value])\n        }\n      },\n      data: {\n        value: option.value,\n        label: option.label,\n        icon: option.icon,\n        count: counts?.get(option.value) ?? 0,\n        initialGroup: wasInitiallySelected ? 'selected' : 'unselected',\n      } as ColumnOptionExtended,\n      closeOnSelect: false,\n    } as any\n  })\n\n  const middleware: MenuMiddleware = {\n    transformNodes: (context) => {\n      const { nodes: filteredNodes } = context\n\n      // Group the filtered items by their initialGroup metadata (sticky grouping)\n      const selectedItems = filteredNodes.filter(\n        (node: any) => node.data?.initialGroup === 'selected',\n      )\n      const unselectedItems = filteredNodes.filter(\n        (node: any) => node.data?.initialGroup === 'unselected',\n      )\n\n      const result: any[] = []\n\n      // Add selected items\n      if (selectedItems.length > 0) {\n        result.push(...selectedItems)\n      }\n\n      // Add separator between selected and unselected if both exist\n      if (selectedItems.length > 0 && unselectedItems.length > 0) {\n        result.push({\n          kind: 'separator' as const,\n          id: `${column.id}-separator`,\n        })\n      }\n\n      // Add unselected items\n      if (unselectedItems.length > 0) {\n        result.push(...unselectedItems)\n      }\n\n      return result\n    },\n  }\n\n  return {\n    nodes,\n    middleware,\n  }\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/option/menu.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/shared/option-item.tsx",
      "content": "'use client'\n\nimport type { ItemNode, ItemSlotProps } from '@bazza-ui/action-menu'\nimport { renderIcon } from '@bazza-ui/action-menu'\nimport type { ColumnOptionExtended } from '@bazza-ui/filters'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { LabelWithBreadcrumbs } from '@/registry/action-menu'\n\nexport function OptionItem({ node: nodeProp, bind, search }: ItemSlotProps) {\n  const props = bind.getRowProps({\n    className: 'group/row justify-between gap-4 min-w-0',\n  })\n\n  const node = nodeProp as ItemNode<ColumnOptionExtended>\n\n  // For checkbox items, the checked state comes from node.checked (if variant is checkbox)\n  const isChecked =\n    (node as any).variant === 'checkbox' ? (node as any).checked : false\n\n  return (\n    <li {...props}>\n      <div className=\"flex items-center gap-2 truncate\">\n        <Checkbox\n          checked={isChecked}\n          className=\"opacity-0 data-[state=checked]:opacity-100 group-data-[focused=true]/row:opacity-100 dark:border-ring shrink-0\"\n        />\n        {node.icon && (\n          <div className=\"size-4 min-h-4 min-w-4 flex items-center justify-center\">\n            {renderIcon(\n              node.icon,\n              'size-4 shrink-0 text-muted-foreground group-data-[focused=true]/row:text-primary',\n            )}\n          </div>\n        )}\n        <LabelWithBreadcrumbs\n          label={node.label ?? ''}\n          breadcrumbs={search?.breadcrumbs}\n        />\n      </div>\n      {node.data?.count && (\n        <span className=\"tabular-nums text-muted-foreground tracking-tight text-xs\">\n          {new Intl.NumberFormat().format(node.data?.count)}\n        </span>\n      )}\n    </li>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/shared/option-item.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/shared/text-item.tsx",
      "content": "'use client'\n\nimport type { ItemNode, ItemSlotProps } from '@bazza-ui/action-menu'\nimport type { FilterModel } from '@bazza-ui/filters'\n\nexport function TextItem({\n  node: nodeProp,\n  bind,\n  search,\n}: ItemSlotProps<FilterModel<'text'>>) {\n  const props = bind.getRowProps({\n    className: 'group/row gap-1 min-w-0',\n  })\n\n  const node = nodeProp as ItemNode<FilterModel<'text'>>\n\n  return (\n    <li {...props}>\n      <span className=\"text-muted-foreground\">{node.data?.operator}</span>\n      <span>{node.data?.values[0]}</span>\n    </li>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/shared/text-item.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/shared/types.ts",
      "content": "import type {\n  Column,\n  ColumnDataType,\n  DataTableFilterActions,\n  FilterModel,\n  FilterStrategy,\n  Locale,\n} from '@bazza-ui/filters'\nimport type { ComponentPropsWithoutRef } from 'react'\nimport type { FilterVariant } from '../../../context'\n\nexport interface FilterValueProps<TData, TType extends ColumnDataType> {\n  filter: FilterModel<TType>\n  column: Column<TData, TType>\n  actions: DataTableFilterActions\n  strategy: FilterStrategy\n  locale?: Locale\n  entityName?: string\n  className?: string\n  variant?: FilterVariant\n}\n\nexport interface FilterValueDisplayProps<TData, TType extends ColumnDataType> {\n  filter: FilterModel<TType>\n  column: Column<TData, TType>\n  actions: DataTableFilterActions\n  locale?: Locale\n  entityName?: string\n}\n\nexport interface FilterValueControllerProps<\n  TData,\n  TType extends ColumnDataType,\n> {\n  filter: FilterModel<TType>\n  column: Column<TData, TType>\n  actions: DataTableFilterActions\n  strategy: FilterStrategy\n  locale?: Locale\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/shared/types.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/text/display.tsx",
      "content": "'use client'\n\nimport { Ellipsis } from 'lucide-react'\nimport type { FilterValueDisplayProps } from '../shared/types'\n\nexport function FilterValueTextDisplay<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterValueDisplayProps<TData, 'text'>) {\n  if (!filter) return null\n  if (\n    filter.values.length === 0 ||\n    (filter.values[0] && filter.values[0].trim() === '')\n  )\n    return <Ellipsis className=\"size-4\" />\n\n  const value = filter.values[0]\n\n  return <span>{value}</span>\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/text/display.tsx"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/text/index.ts",
      "content": "export { FilterValueTextDisplay } from './display'\nexport { createTextFilterMiddleware, createTextMenu } from './menu'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/text/index.ts"
    },
    {
      "path": "registry/data-table-filter/components/filter-value/text/menu.tsx",
      "content": "import type { MenuMiddleware, SubmenuDef } from '@bazza-ui/action-menu'\nimport type {\n  Column,\n  DataTableFilterActions,\n  FilterModel,\n  TextFilterOperator,\n} from '@bazza-ui/filters'\nimport { TextItem } from '../shared/text-item'\nimport type { FilterValueControllerProps } from '../shared/types'\n\n/**\n * Middleware that generates filter operator options based on search query\n */\nexport function createTextFilterMiddleware<TData>({\n  column,\n  actions,\n}: {\n  column: Column<TData, 'text'>\n  actions: DataTableFilterActions\n}): MenuMiddleware<FilterModel<'text'>> {\n  return {\n    transformNodes: (context) => {\n      const { query, mode, createNode } = context\n\n      // Only inject items in search mode when there's a query\n      if (mode !== 'search' || !query?.trim()) {\n        return []\n      }\n\n      const changeText = (value: string, operator: TextFilterOperator) => {\n        actions.batch((tx) => {\n          tx.setFilterValue(column, [String(value)])\n          tx.setFilterOperator(column.id, operator)\n        })\n      }\n\n      return [\n        createNode({\n          kind: 'item',\n          id: `${column.id}-text-contains`,\n          label: `contains ${query}`,\n          data: {\n            operator: 'contains',\n            values: [query],\n          } as FilterModel<'text'>,\n          keywords: [query],\n          onSelect: () => {\n            changeText(query, 'contains')\n          },\n        }),\n        createNode({\n          kind: 'item',\n          id: `${column.id}-text-does-not-contain`,\n          label: `does not contain ${query}`,\n          data: {\n            operator: 'does not contain',\n            values: [query],\n          } as FilterModel<'text'>,\n          keywords: [query],\n          onSelect: () => {\n            changeText(query, 'does not contain')\n          },\n        }),\n      ]\n    },\n  }\n}\n\nexport function createTextMenu<TData>({\n  filter,\n  column,\n  actions,\n  locale = 'en',\n}: FilterValueControllerProps<TData, 'text'>): SubmenuDef {\n  return {\n    kind: 'submenu',\n    id: column.id,\n    icon: column.icon,\n    label: column.displayName,\n    inputPlaceholder: `Enter ${column.displayName.toLowerCase()}...`,\n    defaults: {\n      item: {\n        closeOnSelect: true,\n      },\n    },\n    ui: {\n      slots: {\n        Item: TextItem as any,\n      },\n      slotProps: {\n        positioner: {\n          align: 'start',\n        },\n      },\n    },\n    middleware: createTextFilterMiddleware({ column, actions }),\n  }\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/components/filter-value/text/menu.tsx"
    },
    {
      "path": "registry/data-table-filter/context/hooks.ts",
      "content": "'use client'\n\nimport type { Column } from '@bazza-ui/filters'\nimport { useContext, useMemo } from 'react'\nimport {\n  DataTableFilterContext,\n  type DataTableFilterContextValue,\n} from './provider'\n\nexport function useFilterContext<\n  TData = unknown,\n>(): DataTableFilterContextValue<TData> {\n  const context = useContext(DataTableFilterContext)\n  if (!context) {\n    throw new Error(\n      'useFilterContext must be used within a DataTableFilterProvider',\n    )\n  }\n  return context as DataTableFilterContextValue<TData>\n}\n\nexport function useFilterColumn<TData = unknown>(\n  columnId: string,\n): Column<TData> | undefined {\n  const { columns } = useFilterContext<TData>()\n  return useMemo(\n    () => columns.find((col) => col.id === columnId),\n    [columns, columnId],\n  )\n}\n\nexport function useFilterActions() {\n  const { actions } = useFilterContext()\n  return actions\n}\n\nexport function useFilterStrategy() {\n  const { strategy } = useFilterContext()\n  return strategy\n}\n\nexport function useFilterLocale() {\n  const { locale } = useFilterContext()\n  return locale\n}\n\nexport function useFilterEntityName() {\n  const { entityName } = useFilterContext()\n  return entityName\n}\n\nexport function useFilterVariant() {\n  const { variant } = useFilterContext()\n  return variant\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/context/hooks.ts"
    },
    {
      "path": "registry/data-table-filter/context/index.ts",
      "content": "export {\n  useFilterActions,\n  useFilterColumn,\n  useFilterContext,\n  useFilterEntityName,\n  useFilterLocale,\n  useFilterStrategy,\n  useFilterVariant,\n} from './hooks'\nexport type {\n  DataTableFilterContextValue,\n  DataTableFilterProviderProps,\n  FilterVariant,\n} from './provider'\nexport { DataTableFilterContext, DataTableFilterProvider } from './provider'\n",
      "type": "registry:file",
      "target": "components/data-table-filter/context/index.ts"
    },
    {
      "path": "registry/data-table-filter/context/provider.tsx",
      "content": "'use client'\n\nimport type {\n  Column,\n  DataTableFilterActions,\n  FilterStrategy,\n  FiltersState,\n  Locale,\n} from '@bazza-ui/filters'\nimport { createContext } from 'react'\n\nexport type FilterVariant = 'default' | 'clean'\n\nexport interface DataTableFilterContextValue<TData = unknown> {\n  columns: Column<TData>[]\n  filters: FiltersState\n  actions: DataTableFilterActions\n  strategy: FilterStrategy\n  locale: Locale\n  entityName?: string\n  variant?: FilterVariant\n}\n\nexport const DataTableFilterContext =\n  createContext<DataTableFilterContextValue | null>(null)\n\nexport interface DataTableFilterProviderProps<TData = unknown> {\n  value: DataTableFilterContextValue<TData>\n  children: React.ReactNode\n}\n\nexport function DataTableFilterProvider<TData>({\n  value,\n  children,\n}: DataTableFilterProviderProps<TData>) {\n  return (\n    <DataTableFilterContext.Provider\n      value={value as DataTableFilterContextValue}\n    >\n      {children}\n    </DataTableFilterContext.Provider>\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/context/provider.tsx"
    },
    {
      "path": "registry/data-table-filter/hooks/use-debounce-callback.tsx",
      "content": "/*\n * Source: https://usehooks-ts.com/react-hook/use-debounce-callback\n */\n\nimport { useEffect, useMemo, useRef } from 'react'\nimport { debounce } from '../lib/debounce'\nimport { useUnmount } from './use-unmount'\n\ntype DebounceOptions = {\n  leading?: boolean\n  trailing?: boolean\n  maxWait?: number\n}\n\ntype ControlFunctions = {\n  cancel: () => void\n  flush: () => void\n  isPending: () => boolean\n}\n\nexport type DebouncedState<T extends (...args: any) => ReturnType<T>> = ((\n  ...args: Parameters<T>\n) => ReturnType<T> | undefined) &\n  ControlFunctions\n\nexport function useDebounceCallback<T extends (...args: any) => ReturnType<T>>(\n  func: T,\n  delay = 500,\n  options?: DebounceOptions,\n): DebouncedState<T> {\n  const debouncedFunc = useRef<ReturnType<typeof debounce>>(null)\n\n  useUnmount(() => {\n    if (debouncedFunc.current) {\n      debouncedFunc.current.cancel()\n    }\n  })\n\n  const debounced = useMemo(() => {\n    const debouncedFuncInstance = debounce(func, delay, options)\n\n    const wrappedFunc: DebouncedState<T> = (...args: Parameters<T>) => {\n      return debouncedFuncInstance(...args)\n    }\n\n    wrappedFunc.cancel = () => {\n      debouncedFuncInstance.cancel()\n    }\n\n    wrappedFunc.isPending = () => {\n      return !!debouncedFunc.current\n    }\n\n    wrappedFunc.flush = () => {\n      return debouncedFuncInstance.flush()\n    }\n\n    return wrappedFunc\n  }, [func, delay, options])\n\n  // Update the debounced function ref whenever func, wait, or options change\n  useEffect(() => {\n    debouncedFunc.current = debounce(func, delay, options)\n  }, [func, delay, options])\n\n  return debounced\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/hooks/use-debounce-callback.tsx"
    },
    {
      "path": "registry/data-table-filter/hooks/use-unmount.tsx",
      "content": "/*\n * Source: https://usehooks-ts.com/react-hook/use-unmount\n */\n\nimport { useEffect, useRef } from 'react'\n\nexport function useUnmount(func: () => void) {\n  const funcRef = useRef(func)\n\n  funcRef.current = func\n\n  useEffect(\n    () => () => {\n      funcRef.current()\n    },\n    [],\n  )\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/hooks/use-unmount.tsx"
    },
    {
      "path": "registry/data-table-filter/lib/debounce.ts",
      "content": "type ControlFunctions = {\n  cancel: () => void\n  flush: () => void\n  isPending: () => boolean\n}\n\ntype DebounceOptions = {\n  leading?: boolean\n  trailing?: boolean\n  maxWait?: number\n}\n\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number,\n  options: DebounceOptions = {},\n): ((...args: Parameters<T>) => ReturnType<T> | undefined) & ControlFunctions {\n  const { leading = false, trailing = true, maxWait } = options\n  let timeout: NodeJS.Timeout | null = null\n  let lastArgs: Parameters<T> | null = null\n  let lastThis: any\n  let result: ReturnType<T> | undefined\n  let lastCallTime: number | null = null\n  let lastInvokeTime = 0\n\n  const maxWaitTime = maxWait !== undefined ? Math.max(wait, maxWait) : null\n\n  function invokeFunc(time: number): ReturnType<T> | undefined {\n    if (lastArgs === null) return undefined\n    const args = lastArgs\n    const thisArg = lastThis\n    lastArgs = null\n    lastThis = null\n    lastInvokeTime = time\n    result = func.apply(thisArg, args)\n    return result\n  }\n\n  function shouldInvoke(time: number): boolean {\n    if (lastCallTime === null) return false\n    const timeSinceLastCall = time - lastCallTime\n    const timeSinceLastInvoke = time - lastInvokeTime\n    return (\n      lastCallTime === null ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxWaitTime !== null && timeSinceLastInvoke >= maxWaitTime)\n    )\n  }\n\n  function startTimer(\n    pendingFunc: () => void,\n    waitTime: number,\n  ): NodeJS.Timeout {\n    return setTimeout(pendingFunc, waitTime)\n  }\n\n  function remainingWait(time: number): number {\n    if (lastCallTime === null) return wait\n    const timeSinceLastCall = time - lastCallTime\n    const timeSinceLastInvoke = time - lastInvokeTime\n    const timeWaiting = wait - timeSinceLastCall\n    return maxWaitTime !== null\n      ? Math.min(timeWaiting, maxWaitTime - timeSinceLastInvoke)\n      : timeWaiting\n  }\n\n  function timerExpired() {\n    const time = Date.now()\n    if (shouldInvoke(time)) {\n      return trailingEdge(time)\n    }\n    timeout = startTimer(timerExpired, remainingWait(time))\n  }\n\n  function leadingEdge(time: number): ReturnType<T> | undefined {\n    lastInvokeTime = time\n    timeout = startTimer(timerExpired, wait)\n    return leading ? invokeFunc(time) : undefined\n  }\n\n  function trailingEdge(time: number): ReturnType<T> | undefined {\n    timeout = null\n    if (trailing && lastArgs) {\n      return invokeFunc(time)\n    }\n    lastArgs = null\n    lastThis = null\n    return result\n  }\n\n  function debounced(\n    this: any,\n    ...args: Parameters<T>\n  ): ReturnType<T> | undefined {\n    const time = Date.now()\n    const isInvoking = shouldInvoke(time)\n\n    lastArgs = args\n    lastThis = this\n    lastCallTime = time\n\n    if (isInvoking) {\n      if (timeout === null) {\n        return leadingEdge(lastCallTime)\n      }\n      if (maxWaitTime !== null) {\n        timeout = startTimer(timerExpired, wait)\n        return invokeFunc(lastCallTime)\n      }\n    }\n    if (timeout === null) {\n      timeout = startTimer(timerExpired, wait)\n    }\n    return result\n  }\n\n  debounced.cancel = () => {\n    if (timeout !== null) {\n      clearTimeout(timeout)\n    }\n    lastInvokeTime = 0\n    lastArgs = null\n    lastThis = null\n    lastCallTime = null\n    timeout = null\n  }\n\n  debounced.flush = () => {\n    return timeout === null ? result : trailingEdge(Date.now())\n  }\n\n  debounced.isPending = () => {\n    return timeout !== null\n  }\n\n  return debounced\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/lib/debounce.ts"
    },
    {
      "path": "registry/data-table-filter/ui/debounced-input.tsx",
      "content": "'use client'\n\nimport { Input } from '@/components/ui/input'\nimport { useCallback, useEffect, useState } from 'react'\nimport { debounce } from '../lib/debounce'\n\nexport function DebouncedInput({\n  value: initialValue,\n  onChange,\n  debounceMs = 500, // This is the wait time, not the function\n  ...props\n}: {\n  value: string | number\n  onChange: (value: string | number) => void\n  debounceMs?: number\n} & Omit<React.InputHTMLAttributes<HTMLInputElement>, 'onChange'>) {\n  const [value, setValue] = useState(initialValue)\n\n  // Sync with initialValue when it changes\n  useEffect(() => {\n    setValue(initialValue)\n  }, [initialValue])\n\n  // Define the debounced function with useCallback\n  const debouncedOnChange = useCallback(\n    debounce((newValue: string | number) => {\n      onChange(newValue)\n    }, debounceMs), // Pass the wait time here\n    [debounceMs, onChange], // Dependencies\n  )\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value\n    setValue(newValue) // Update local state immediately\n    debouncedOnChange(newValue) // Call debounced version\n  }\n\n  return <Input {...props} value={value} onChange={handleChange} />\n}\n",
      "type": "registry:file",
      "target": "components/data-table-filter/ui/debounced-input.tsx"
    }
  ]
}