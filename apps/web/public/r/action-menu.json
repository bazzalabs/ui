{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "action-menu",
  "type": "registry:component",
  "title": "Action menu",
  "dependencies": ["@bazza-ui/action-menu@canary", "lucide-react"],
  "files": [
    {
      "path": "registry/action-menu/index.tsx",
      "content": "import {\n  createActionMenu,\n  defaultSlots,\n  renderIcon,\n} from '@bazza-ui/action-menu'\nimport { CheckIcon, ChevronRightIcon } from 'lucide-react'\nimport { Fragment, useCallback } from 'react'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { cn } from '@/lib/utils'\n\ndeclare module '@bazza-ui/action-menu' {\n  interface ItemExtendedProperties {\n    description?: string\n  }\n}\n\nexport const ActionMenu = createActionMenu({\n  slots: {\n    GroupHeading: ({ node, bind }) => (\n      <div {...bind.getGroupHeadingProps()}>\n        <span>{node.heading}</span>\n      </div>\n    ),\n\n    Item: ({ node, bind, search }) => {\n      const props = bind.getRowProps({\n        className: cn('group/row', node.description && 'gap-3'),\n      })\n\n      const isRadioItem = node.group && node.group.variant === 'radio'\n      const isRadioChecked = isRadioItem && node.group?.value === node.id\n\n      const isCheckboxItem = node.variant === 'checkbox'\n\n      return (\n        <li {...props}>\n          {isCheckboxItem && (\n            <Checkbox\n              checked={Boolean(node.checked)}\n              className=\"opacity-0 data-[state=checked]:opacity-100 group-data-[focused=true]/row:opacity-100 dark:border-ring shrink-0\"\n            />\n          )}\n\n          {node.icon && (\n            <div className=\"min-h-4 min-w-4 size-4 flex items-center justify-center\">\n              {renderIcon(\n                node.icon,\n                'size-4 shrink-0 text-muted-foreground group-data-[focused=true]/row:text-primary',\n              )}\n            </div>\n          )}\n          <div className=\"flex flex-col min-w-0\">\n            <LabelWithBreadcrumbs\n              label={node.label ?? ''}\n              breadcrumbs={search?.breadcrumbs}\n            />\n            {node.description && (\n              <span className=\"text-muted-foreground text-xs truncate\">\n                {node.description}\n              </span>\n            )}\n          </div>\n          {isRadioChecked && <CheckIcon className=\"size-4 ml-auto\" />}\n        </li>\n      )\n    },\n    SubmenuTrigger: ({ node, bind, search }) => {\n      const props = bind.getRowProps({\n        className: 'group/row',\n      })\n\n      return (\n        <li {...props}>\n          <div className=\"flex items-center gap-2 min-w-0\">\n            {node.icon && (\n              <div className=\"size-4 flex items-center justify-center\">\n                {renderIcon(\n                  node.icon,\n                  'size-4 shrink-0 text-muted-foreground group-data-[focused=true]:text-primary',\n                )}\n              </div>\n            )}\n            <LabelWithBreadcrumbs\n              label={node.label ?? ''}\n              breadcrumbs={search?.breadcrumbs}\n            />\n          </div>\n          <TriangleRightIcon className=\"text-muted-foreground/75 group-data-[menu-state=open]:group-data-[menu-focused=false]:text-foreground/75 group-data-[menu-focused=true]:text-foreground transition-[color] duration-50 ease-out shrink-0\" />\n        </li>\n      )\n    },\n    Loading: (args) => {\n      const count = args.progress?.reduce((acc, progress) => {\n        return progress.isLoading ? acc : acc + 1\n      }, 0)\n      const total = args.progress?.length ?? 0\n\n      return (\n        <div className=\"flex items-center justify-center gap-2 h-12 text-muted-foreground\">\n          <DiamondSpinner className=\"size-5 text-primary rotate-45\" />\n          <span className=\"tabular-nums\">\n            Loading {total > 0 ? `${count}/${total}` : ''}...\n          </span>\n        </div>\n      )\n    },\n    Empty: ({ query }) =>\n      query ? (\n        <div className=\"flex items-center justify-center h-10 text-muted-foreground\">\n          No matching options.\n        </div>\n      ) : null,\n    List: (args) =>\n      !args.query && args.nodes.length === 0 ? null : defaultSlots().List(args),\n  },\n  slotProps: {\n    positioner: {\n      root: { sideOffset: 8, side: 'bottom', alignOffset: -4 },\n      sub: { sideOffset: -2, align: 'list', alignOffset: -4 },\n    },\n  },\n  classNames: {\n    drawerOverlay: cn(\n      'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/40 h-full w-full',\n    ),\n    drawerContent: cn(\n      'fixed z-50',\n      'data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80svh] data-[vaul-drawer-direction=top]:rounded-lg',\n      'data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80svh] data-[vaul-drawer-direction=bottom]:rounded-lg data-[vaul-drawer-direction=bottom]:mx-4',\n    ),\n    drawerContentInner: cn(\n      'border rounded-lg bg-popover flex h-auto flex-col min-h-0 overflow-hidden shadow-lg mb-4',\n      '[--action-menu-drawer-handle-height:theme(spacing.8)]',\n    ),\n    drawerHandle: cn(\n      'h-(--action-menu-drawer-handle-height) w-full relative',\n      'before:absolute before:top-4 before:left-1/2 before:-translate-x-1/2',\n      'before:bg-muted before:h-2 before:w-[100px] before:shrink-0 before:rounded-full',\n    ),\n    content: cn(\n      'data-[mode=dropdown]:border bg-popover rounded-lg z-50 flex flex-col text-sm data-[root-menu]:drop-shadow-md data-[sub-menu]:drop-shadow-xl origin-(--radix-popper-transform-origin)',\n      'data-[root-menu]:data-[state=open]:animate-in data-[root-menu]:data-[state=closed]:animate-out data-[root-menu]:data-[state=closed]:fade-out-0 data-[root-menu]:data-[state=open]:fade-in-0 data-[root-menu]:data-[state=closed]:zoom-out-95 data-[root-menu]:data-[state=open]:zoom-in-95 data-[root-menu]:data-[side=bottom]:slide-in-from-top-2 data-[root-menu]:data-[side=left]:slide-in-from-right-2 data-[root-menu]:data-[side=right]:slide-in-from-left-2 data-[root-menu]:data-[side=top]:slide-in-from-bottom-2 data-[root-menu]:data-[state=open]:transition-[opacity,scale] data-[root-menu]:data-[state=open]:duration-150 data-[root-menu]:data-[state=closed]:transition-[opacity,scale] data-[root-menu]:data-[state=closed]:duration-150',\n      'data-[mode=dropdown]:max-h-[min(500px,var(--action-menu-available-height))]',\n      'box-content',\n      'data-[mode=dropdown]:w-[min(400px,max(var(--row-width),175px))]',\n      'data-[mode=drawer]:max-h-[calc(80svh-var(--action-menu-drawer-handle-height)-calc(var(--spacing)*4))]',\n    ),\n    list: cn(\n      'scroll-py-1 overflow-y-auto overflow-x-hidden outline-none',\n      '[-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]',\n      'w-full flex-1',\n      'py-1',\n    ),\n    input: cn(\n      'outline-hidden disabled:cursor-not-allowed disabled:opacity-50 min-h-9 max-h-9 px-4 border-b',\n      'placeholder-muted-foreground/70 focus-visible:placeholder-muted-foreground placeholder:transition-[color] placeholder:duration-50 placeholder:ease-in-out',\n      'data-[mode=drawer]:text-[16px] data-[mode=drawer]:px-6',\n      'caret-blue-500',\n      'w-full',\n    ),\n    groupHeading: cn(\n      'mt-3 data-[index=0]:mt-1 mb-2',\n      'text-xs font-medium text-muted-foreground px-3',\n    ),\n    item: cn(\n      'group flex items-center w-full gap-2 text-sm select-none aria-disabled:opacity-50',\n      'data-[focused=true]:not-disabled:text-accent-foreground',\n      'py-1.5 data-[mode=dropdown]:px-4 data-[mode=drawer]:px-5',\n      'truncate w-full relative z-1',\n      'before:absolute before:top-0 before:left-1 before:right-1 before:h-full data-[focused=true]:not-disabled:before:bg-accent before:rounded-md before:z-[-1]',\n    ),\n    subtrigger: cn(\n      \"group flex items-center justify-between data-[focused=true]:text-accent-foreground relative cursor-default gap-4 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground\",\n      'py-1.5 data-[mode=drawer]:px-5 data-[mode=dropdown]:px-4',\n      'overflow-x-hidden w-full relative z-1',\n      'before:absolute before:top-0 before:left-1 before:right-1 before:h-full data-[focused=true]:before:bg-accent before:rounded-md before:z-[-1]',\n    ),\n  },\n})\n\nconst TriangleRightIcon = ({\n  ...props\n}: React.HTMLAttributes<SVGSVGElement>) => {\n  return (\n    <svg\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M6 11L6 4L10.5 7.5L6 11Z\" fill=\"currentColor\" />\n    </svg>\n  )\n}\n\nconst diamondCoords = [\n  { x: 3, y: 48 },\n  { x: 18, y: 33 },\n  { x: 18, y: 48 },\n  { x: 18, y: 63 },\n  { x: 33, y: 48 },\n  { x: 33, y: 18 },\n  { x: 33, y: 33 },\n  { x: 33, y: 63 },\n  { x: 33, y: 78 },\n  { x: 48, y: 3 },\n  { x: 48, y: 18 },\n  { x: 48, y: 33 },\n  { x: 48, y: 48 },\n  { x: 48, y: 63 },\n  { x: 48, y: 78 },\n  { x: 48, y: 93 },\n  { x: 63, y: 18 },\n  { x: 63, y: 33 },\n  { x: 63, y: 48 },\n  { x: 63, y: 63 },\n  { x: 63, y: 78 },\n  { x: 78, y: 33 },\n  { x: 78, y: 48 },\n  { x: 78, y: 63 },\n  { x: 93, y: 48 },\n] as const\n\nexport const DiamondSpinner = ({\n  className,\n  ...props\n}: React.SVGProps<SVGSVGElement>) => {\n  const getRectProps = useCallback(\n    (size: number, coord: { x: number; y: number }) => {\n      return {\n        x: coord.x - size / 2,\n        y: coord.y - size / 2,\n        width: size,\n        height: size,\n      }\n    },\n    [],\n  )\n\n  return (\n    <svg\n      className={cn('fill-current size-6', className)}\n      viewBox=\"0 0 96 96\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <style>\n        {`\n          @keyframes diamond-spin {\n            25% { transform: translate(30px, -30px); }\n            50% { transform: translate(60px, 0px); }\n            75% { transform: translate(30px, 30px); }\n          }\n        `}\n      </style>\n      {/* Background squares */}\n      {diamondCoords.map((c) => (\n        <rect\n          key={`bg-${c.x}-${c.y}`}\n          className=\"fill-current/30\"\n          {...getRectProps(7, c)}\n        />\n      ))}\n      {/* Animated squares */}\n      <g style={{ animation: 'diamond-spin 1.4s steps(2, end) infinite' }}>\n        {diamondCoords.slice(0, 5).map((c) => (\n          <rect key={`fg-${c.x}-${c.y}`} {...getRectProps(9, c)} />\n        ))}\n      </g>\n    </svg>\n  )\n}\n\nexport const LabelWithBreadcrumbs = ({\n  label,\n  breadcrumbs,\n  classNames,\n}: {\n  label: React.ReactNode\n  breadcrumbs?: string[]\n  classNames?: {\n    label?: string\n    breadcrumb?: string\n    separator?: string\n  }\n}) => (\n  <div className=\"flex items-center gap-1 truncate\">\n    {breadcrumbs?.map((crumb, idx) => (\n      <Fragment key={`${idx}-${crumb}`}>\n        <span\n          className={cn(\n            'text-muted-foreground truncate',\n            classNames?.breadcrumb,\n          )}\n        >\n          {crumb}\n        </span>\n        <ChevronRightIcon\n          className={cn(\n            'size-3 text-muted-foreground/75 stroke-[2.5px] shrink-0',\n            classNames?.separator,\n          )}\n        />\n      </Fragment>\n    ))}\n    <span\n      className={cn(\n        'truncate',\n        'text-primary/90 group-data-[focused=true]/row:text-primary',\n        classNames?.label,\n      )}\n    >\n      {label}\n    </span>\n  </div>\n)\n",
      "type": "registry:file",
      "target": "components/ui/action-menu.tsx"
    }
  ]
}
